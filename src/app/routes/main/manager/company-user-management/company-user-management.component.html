<div>
  <form class="SearchForm" nz-form [formGroup]="searchForm">
    <nz-row>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9">企业名称</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-col>
              <input nz-input formControlName="companyName">
            </nz-col>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'countyCode'">企业类型</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="enterpriseType" [attr.id]="'enterpriseType'"
              [nzPlaceHolder]="'请选择'" nzAllowClear>
              <nz-option *ngFor="let item of enterpriseTypeList" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9">用户名</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-col>
              <input nz-input formControlName="userName">
            </nz-col>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'source'">来源</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="source" [attr.id]="'source'" [nzPlaceHolder]="'请选择'"
              nzAllowClear>
              <nz-option *ngFor="let item of sourceList" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'provinceCode'">(区域)省</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="provinceCode" [attr.id]="'provinceCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear (ngModelChange)="getCitys($event)" [nzDisabled]="provinceIdFlag">
              <nz-option *ngFor="let item of provinces" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'cityCode'">(区域)市</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="cityCode" [attr.id]="'cityCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear (ngModelChange)="getDistricts($event)" [nzDisabled]="cityIdFlag">
              <nz-option *ngFor="let item of citys" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'countyCode'">(区域)区</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="countyCode" [attr.id]="'countyCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear [nzDisabled]="districtIdFlag">
              <nz-option *ngFor="let item of districts" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9">平台名称</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-col>
              <input nz-input formControlName="platform">
            </nz-col>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
    <nz-row class="but-group" nzFlex [nzJustify]="'space-between'" style="margin-top:15px;">
      <nz-col nzSpan="12" style="text-align: left;">
        <button nz-button [nzType]="'primary'" (click)="showModalForComponent(false)" type="button" *ngIf="menuList[0].show">
          <i class="anticon anticon-plus"></i>
          <span>添加企业用户</span>
        </button>
        <nz-upload [nzCustomRequest]="click_fileUp" [nzShowUploadList]="false" *ngIf="menuList[1].show">
          <button nz-button type="button">
            <i class="anticon anticon-upload"></i>
            <span>批量添加用户</span>
          </button>
        </nz-upload>
        <a (click)="downLoadTemp()">模板下载</a>
      </nz-col>
      <nz-col nzSpan="12">
        <button nz-button [nzType]="'primary'" (click)="getCompanyList(searchForm.value)" (keyup.enter)="getCompanyList(searchForm.value)">
          <i class="anticon anticon-search"></i>
          <span>查询</span>
        </button>
        <button nz-button [nzType]="'primary'" (click)="resetForm()">
          <i class="anticon anticon-reload"></i>
          <span>重置</span>
        </button>
      </nz-col>

    </nz-row>
  </form>

  <nz-table #companyUserTable [nzData]="data" [nzTotal]="total" (nzCurrentPageDataChange)="currentPageDataChange($event)"
    (nzPageIndexChange)="refreshStatus($event)" [nzFrontPagination]="false" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize"
    >
    <thead>
      <tr>
        <th nzShowCheckbox [(nzChecked)]="allChecked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="checkAll($event)"></th>
        <th>序号</th>
        <th>企业名称</th>
        <th>用户名</th>
        <th>来源</th>
        <th>所属市</th>
        <th>所属区</th>
        <th>状态</th>
        <th>平台名称</th>
        <th *ngIf="menuList[2].show||menuList[3].show||menuList[4].show||menuList[5].show">操作</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of companyUserTable.data;let i = index;">
        <td nzShowCheckbox [(nzChecked)]="data.checked" [nzDisabled]="data.disabled" (nzCheckedChange)="refreshStatus()"></td>
        <td>{{i+1}}</td>
        <td nz-tooltip nzTitle="{{data.enterpriseName}}" nzPlacement="topLeft">{{data.enterpriseName}}</td>
        <td>{{data.loginName}}</td>
        <td>{{data.sourceName}}</td>
        <td>{{data.cityName}}</td>
        <td>{{data.districtName}}</td>
        <td>{{data.status=='0'?'正常':'禁用'}}</td>
        <td>{{data.platform}}</td>
        <td *ngIf="menuList[2].show||menuList[3].show||menuList[4].show||menuList[5].show">
          <nz-dropdown>
            <button nz-button nz-dropdown [nzType]="'primary'">操作<i class="anticon anticon-down"></i></button>
            <ul nz-menu style="text-align: center">
              <li nz-menu-item (click)="showModalForComponent(data.id)" *ngIf="menuList[2].show">
                <a>修改</a>
              </li>
              <li nz-menu-item (click)="creatPass(data,true)" *ngIf="menuList[3].show">
                <a>重置密码</a>
              </li>
              <li nz-menu-item (click)="creatPass(data,false)" *ngIf="menuList[4].show">
                <a>重置手机</a>
              </li>
              <li nz-menu-item nzType="danger" (click)="publishJob({'id':data.id,'status':data.status})" *ngIf="menuList[5].show">
                <a>{{data.status=='1'?'启用':'禁用'}}</a>
              </li>
              <!-- <li nz-menu-item>
                <button nz-button nzType="danger" nz-popconfirm nzTitle="确定执行该操作?" (nzOnConfirm)="confirm(data.taskId)"
                  (nzOnCancel)="cancel()">删除</button>
              </li> -->
            </ul>
          </nz-dropdown>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>
