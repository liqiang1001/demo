<div class="c-content-inner">
  <nz-col>
    <form class="SearchForm" nz-form [formGroup]="searchForm">
      <nz-row>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">企业名称</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-col>
                <input nz-input formControlName="name">
              </nz-col>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">统一社会信用代码</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-col>
                <input nz-input formControlName="registrationNumber">
              </nz-col>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">市</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%" formControlName="cityId" [attr.id]="'cityId'" [nzPlaceHolder]="'请选择'"
                nzAllowClear (ngModelChange)="_getDistricts($event)">
                <nz-option *ngFor="let item of citys" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">区</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%" formControlName="districtId" [attr.id]="'districtId'" [nzPlaceHolder]="'请选择'"
                nzAllowClear (ngModelChange)="_getRoleType()">
                <nz-option *ngFor="let item of districts" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">注关键字</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-col>
                <input nz-input formControlName="remarkKeyWord">
              </nz-col>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">企业类型(可复选)</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%;" [nzMode]="'multiple'" formControlName="typeIds" [attr.id]="'typeIds'"
                [nzPlaceHolder]="'请选择'" nzAllowClear>
                <nz-option *ngFor="let item of conpanyNameData" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">来源</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%" formControlName="source" [attr.id]="'source'" [nzPlaceHolder]="'请选择'"
                nzAllowClear>
                <nz-option *ngFor="let item of sourceNames" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">整改状态</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%" formControlName="rectificationStatus" [attr.id]="'rectificationStatus'"
                [nzPlaceHolder]="'请选择'" nzAllowClear>
                <nz-option *ngFor="let item of rectificationStatusNames" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">经营状态</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%" formControlName="businessSituation" [attr.id]="'businessSituation'"
                [nzPlaceHolder]="'请选择'" nzAllowClear>
                <nz-option *ngFor="let item of businessSituationNames" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">检查状态</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-select style="width: 100%" formControlName="checkType" [attr.id]="'businessSituation'"
                [nzPlaceHolder]="'请选择'" nzAllowClear>
                <nz-option *ngFor="let item of checkTypeList" [nzLabel]="item.name" [nzValue]="item.id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzMd="6" nzLg="8" nzXl="6">
          <nz-form-item nzFlex>
            <nz-form-label nzSpan="9">平台名称</nz-form-label>
            <nz-form-control nzSpan="15">
              <nz-col>
                <input nz-input formControlName="platform">
              </nz-col>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>
      <nz-row class="but-group">
        <button nz-button [nzType]="'primary'" (click)="_getDataList(searchForm.value)" (keyup.enter)="_getDataList(searchForm.value)">
          <i class="anticon anticon-search"></i>
          <span>查询</span>
        </button>
        <button nz-button [nzType]="'primary'" (click)="resetForm()">
          <i class="anticon anticon-reload"></i>
          <span>重置条件</span>
        </button>
        <button nz-button [nzType]="'primary'" *ngIf="menuList[0].show" (click)="_outFile(searchForm.value)"
          (keyup.enter)="_outFile(searchForm.value)">
          <i class="anticon anticon-download"></i>
          <span>导出</span>
        </button>
      </nz-row>
    </form>
  </nz-col>
  <div class="row">
    <div class="col-md-6">
      <div class="row row-bottom">
        <div class="col-md-3 makeSelfSet" [ngStyle]="{'color':displayColumn? 'rgba(3,133,255,1)' : 'rgba(153,153,153,1)' }"
          (click)="openColumn()">
          <div class="makeSelfSetDiv">
            <i class="anticon anticon-appstore-o"></i>
          </div>
          <span style="font-size:16px; margin-left:17px;font-family:MicrosoftYaHei;font-weight:400;">自定义列</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="displayColumn" style="margin-bottom:10px;">
    <div class="col-md-12 ">
      <div class="checkBoxList">
        <label *ngFor="let item of govColumn let i=index" style="cursor:pointer;margin: 10px;">
          <input [value]='item.sortNum' type="checkbox" (click)="selectCheckbox($event.target.checked, item)" [checked]="item.check"
            [disabled]="item.readOnly" />&nbsp;{{item.name}}&nbsp;&nbsp;&nbsp;&nbsp;
        </label>
      </div>
    </div>
  </div>

  <nz-table #rowSelection (nzCurrentPageDataChange)="currentPageDataChange($event)" [nzData]="enterMsg" 
    [nzTotal]="total" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize" [nzFrontPagination]="false" [nzScroll]="{ x: '300px'}"
     [nzShowSizeChanger]="true" [nzShowQuickJumper]="true" (nzPageIndexChange)="refreshStatus($event)" class="rowSelectionTable"  (nzPageIndexChange)="searchData()"
     (nzPageSizeChange)="searchData(true)" >
    <thead nzType="primary">
      <tr #box>
        <th nz-th>序号</th>
        <th nz-th *ngFor="let item of selects; let i = index">{{item.name}}</th>
        <th nz-th *ngIf="menuList[1].show||menuList[2].show||menuList[3].show">操作</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of rowSelection.data; let j = index;">
        <td nz-td>{{j + 1}}</td>
        <td nz-td *ngFor="let da of item;let i=index">
          <a href="javascript:void(0)" (click)="toDetail(item)" *ngIf="i==0" class="enterpriseName shit" [title]="da">{{da}}</a>
          <span class="shit" *ngIf="i!=0" [title]="da">{{da}}</span>
        </td>
        <td nz-td *ngIf="menuList[1].show||menuList[2].show||menuList[3].show">
          <nz-dropdown>
            <button nz-button nz-dropdown nzType="primary"><span>操作</span> <i class="anticon anticon-down"></i></button>
            <ul nz-menu class="drop-btn">
              <li nz-menu-item style="text-align: center;" (click)="baogao(item)" *ngIf="menuList[1].show">
                <span>企业报告</span>
              </li>
              <li nz-menu-item style="text-align: center;" (click)="remark(item)" *ngIf="menuList[2].show">
                <span>工作台账</span>
              </li>
              <li nz-menu-item style="text-align: center;" (click)="edit(item)" *ngIf="menuList[3].show" [routerLink]="[ './edit']">
                <span>编辑</span>
              </li>
            </ul>
          </nz-dropdown>
        </td>
      </tr>
    </tbody>
  </nz-table>
  <!-- 资信报告 -->
  <nz-modal [(nzVisible)]="isVisible" nzTitle="企业报告" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <p><a href="">资信报告</a></p>
  </nz-modal>

  <!-- 工作台账 -->
  <nz-modal [(nzVisible)]="isVisible1" *ngIf="isVisible1" nzWidth="{{width}}" nzTitle="工作台账" (nzOnCancel)="handleCancel1()" (nzOnOk)="handleOk1()">
    <router-outlet ></router-outlet >
  </nz-modal>
</div>
