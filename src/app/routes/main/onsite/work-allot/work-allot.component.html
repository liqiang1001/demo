<div>
  <form class="SearchForm" nz-form [formGroup]="searchForm">
    <nz-row>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]=" 'provinceCode'">省</nz-form-label>
          <nz-form-control nzSpan="15">
            <!-- <input nz-input placeholder="placeholder" formControlName="provinceCode" [attr.id]="provinceCode"> -->
            <nz-select style="width: 100%" formControlName="provinceCode" [attr.id]="'provinceCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear (ngModelChange)="getCitys($event)">
              <nz-option *ngFor="let item of provinces" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'cityCode'">市</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="cityCode" [attr.id]="'cityCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear (ngModelChange)="getDistricts($event)">
              <nz-option *ngFor="let item of citys" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'countyCode'">区</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="countyCode" [attr.id]="'countyCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear (ngModelChange)="getRoads($event)">
              <nz-option *ngFor="let item of districts" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'countyCode'">街道</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="countyCode" [attr.id]="'countyCode'" [nzPlaceHolder]="'请选择'"
              nzAllowClear (ngModelChange)="getCitys($event)">
              <nz-option *ngFor="let item of roads" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'companysName'">企业名称</nz-form-label>
          <nz-form-control nzSpan="15">
            <input nz-input placeholder="请输入企业名称" formControlName="companysName" [attr.id]="'companysName'">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'checkPersonsName'">核查员</nz-form-label>
          <nz-form-control nzSpan="15">
            <input nz-input placeholder="请输入核查员" formControlName="checkPersonsName" [attr.id]="'checkPersonsName'">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'status'">状态</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="status" [attr.id]="'status'" [nzPlaceHolder]="'请选择'"
              nzAllowClear>
              <nz-option *ngFor="let item of statusArr" [nzLabel]="item.name" [nzValue]="item.value">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'checkItemGroupId'">核查项组</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="checkItemGroupId" [attr.id]="'checkItemGroupId'"
              [nzPlaceHolder]="'请选择'" nzAllowClear>
              <nz-option *ngFor="let item of checkGroup" [nzLabel]="item.checkItemGroupName" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col nzMd="6" nzLg="8" nzXl="6">
        <nz-form-item nzFlex>
          <nz-form-label nzSpan="9" [nzFor]="'checkProper'">核查性质</nz-form-label>
          <nz-form-control nzSpan="15">
            <nz-select style="width: 100%" formControlName="checkProper" [attr.id]="'checkProper'" [nzPlaceHolder]="'请选择'"
              nzAllowClear>
              <nz-option *ngFor="let item of properList" [nzLabel]="item.name" [nzValue]="item.id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
    <nz-row class="but-group" nzFlex [nzJustify]="'space-between'" style="margin-top:15px;">
      <nz-col nzSpan="12" style="text-align: left;" *ngIf="menuList[0].show">
        <button nz-button [nzType]="'primary'" [routerLink]="[ './Create' ]">
          <i class="anticon anticon-plus-circle-o"></i>
          <span>创建任务</span>
        </button>
        <!-- <button nz-button [nzType]="'primary'" (click)="publishJob($event)">
          <i class="anticon anticon-check-square-o"></i>
          <span>发布选中任务</span>
        </button> -->
      </nz-col>
      <nz-col nzSpan="12">
        <button nz-button [nzType]="'primary'" (click)="getList(searchForm.value)" (keyup.enter)="getList(searchForm.value)">
          <i class="anticon anticon-search"></i>
          <span>查询</span>
        </button>
        <button nz-button [nzType]="'primary'" (click)="resetForm()">
          <i class="anticon anticon-reload"></i>
          <span>重置</span>
        </button>
      </nz-col>
    </nz-row>
  </form>
  <nz-table #rowSelectionTable [nzData]="data" (nzCurrentPageDataChange)="currentPageDataChange($event)" [nzTotal]="total"
    (nzPageIndexChange)="refreshStatus($event)" [nzFrontPagination]="false" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize"
    >
    <thead>
      <tr>
        <!-- <th nzShowCheckbox [(nzChecked)]="allChecked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="checkAll($event)"></th> -->
        <th>序号</th>
        <th>核查项组</th>
        <th>企业名称</th>
        <th>创建时间</th>
        <th>任务性质</th>
        <th>核查员</th>
        <th>任务状态</th>
        <th *ngIf="menuList[2].show||menuList[1].show">操作</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of rowSelectionTable.data;let i = index;">
        <!-- <td nzShowCheckbox [(nzChecked)]="data.checked" [nzDisabled]="data.disabled" (nzCheckedChange)="refreshStatus()"></td> -->
        <td>{{i+1}}</td>
        <td>{{data.res0}}</td>
        <td>{{data.companysName}}</td>
        <td>{{data.startTime|date:'y-MM-dd'}}</td>
        <td>{{data.res1}}</td>
        <td>{{data.checkPersonsName}}</td>
        <td>{{data.status=='1'?'未发布':'已发布'}}</td>
        <td *ngIf="menuList[2].show||menuList[1].show">
          <nz-dropdown [nzDisabled]="data.status=='2'">
            <button nz-button nz-dropdown [nzType]="'primary'">操作<i class="anticon anticon-down"></i></button>
            <ul nz-menu style="text-align: center">
              <li nz-menu-item (click)="publishJob(data.taskId)" *ngIf="menuList[1].show">
                <a>发布任务</a>
              </li>
              <li nz-menu-item *ngIf="menuList[2].show">
                <button nz-button nzType="danger" nz-popconfirm nzTitle="确定执行该操作?" (nzOnConfirm)="confirm(data.taskId)"
                  (nzOnCancel)="cancel()">删除</button>
              </li>
            </ul>
          </nz-dropdown>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>
